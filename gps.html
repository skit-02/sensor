<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>出席確認</title>
    <link rel = "stylesheet" href = "stylesheet.css"></link>
</head>

<body>
    <div id="txt">ここにデータを表示</div>
    <script>
        navigator.geolocation.watchPosition((position) => {
            var lat = position.coords.latitude;
            var lng = position.coords.longitude;
            var accu = position.coords.accuracy;
            displayData(lat, lng, accu);
        }, (error) => {
        }, {
            enableHighAccuracy: true
        });

        function displayData(lat, lng, accu) {
            const x = (lat - 21.0044) * 110717.0485;
            const y = (lng - 105.8465) * 103970.2317;
            const d = Math.sqrt(x * x + y * y);
            if (d < accu) {
                var txt = document.getElementById("txt");
                txt.innerHTML = "緯度, 経度: " + lat + ", " + lng + "<br>" + "精度: " + accu + "出席を確認しました";
            } else {
                var txt = document.getElementById("txt");
                txt.innerHTML = "不正出席は犯罪です";    
            }
        }
    </script>
</body>

</html>
